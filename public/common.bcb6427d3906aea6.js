"use strict";(self.webpackChunkm1p10mean_front=self.webpackChunkm1p10mean_front||[]).push([[592],{6060:(g,_,r)=>{r.d(_,{v:()=>a});var e=(()=>{return(n=e||(e={})).SUCCESS="message-success",n.INFO="message-info",n.WARNING="message-warning",n.ERROR="message-error",e;var n})();class a{constructor(s,l=e.INFO){this.value=s,this.level=l,this.display=!0}static success(s){return new a(s,e.SUCCESS)}static info(s){return new a(s,e.INFO)}static warning(s){return new a(s,e.WARNING)}static error(s){return new a(s,e.ERROR)}hide(){this.display=!1}}},1228:(g,_,r)=>{r.d(_,{e:()=>E});var e=r(520),a=r(4004),n=r(262),s=r(2340),l=r(6060),d=r(1223),v=r(591);let E=(()=>{class u{constructor(i,o){this.http=i,this.messageService=o}get utilisateur(){return this._utilisateur}get isAuth(){return!!this._utilisateur}login(i){const o=new e.WM({"Content-Type":"application/json"});return this.http.post(`${s.N.serverUrl}/auth/login`,i,{headers:o}).pipe((0,a.U)(t=>{localStorage.setItem("token",t.data.token);let p=t.data.utilisateur;return localStorage.setItem("utilisateur_id",p._id),this._utilisateur=p,p}),(0,n.K)(t=>{throw this.messageService.clear(),this.messageService.add(l.v.error(t.error.data.message)),t}))}inscription(i){const o=new e.WM({"Content-Type":"application/json"});return this.http.post(`${s.N.serverUrl}/auth/inscription`,i,{headers:o}).pipe((0,a.U)(t=>t.data.utilisateur),(0,n.K)(t=>{throw this.messageService.clear(),this.messageService.add(l.v.error(t.error.data.message)),t}))}logout(){localStorage.removeItem("token"),this._utilisateur=void 0}findCurrentUtilisateur(){const i=localStorage.getItem("token")||"";let o=localStorage.getItem("utilisateur_id")||"";const c={headers:new e.WM({"Content-Type":"application/json",Authorization:`Bearer ${i}`})};return this.http.get(`${s.N.apiUrl}/utilisateur/${o}`,c).pipe((0,a.U)(t=>t.data.utilisateurs[0]),(0,n.K)(t=>{throw this.messageService.add(l.v.error(t.error.data.message)),t}))}}return u.\u0275fac=function(i){return new(i||u)(d.LFG(e.eN),d.LFG(v.I))},u.\u0275prov=d.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()}}]);